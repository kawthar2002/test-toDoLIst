(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function c(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=c(t);fetch(t.href,n)}})();const y=e=>typeof e>"u"||e===null,l="tasks";let i=1;const h={id:i,title:"Text header",text:"Text body",checked:!1},g=document.querySelector(".task-list"),a=()=>{let e=localStorage.getItem(l);return e=JSON.parse(e),Array.isArray(e)?e:[]},T=()=>{const e=a(),r=e.every(c=>!y(c.title)&&!y(c.text));i=e.length===0?1:e.length+1,r&&e.forEach(c=>{var t;const o=k(c.title,c.text,c.id);g.prepend(o),c.checked&&((t=o.querySelector(".task-list__item-tick"))==null||t.click())})},E=(e,r,c)=>{const o=a();o.forEach(t=>{t.id===e&&(t[c]=r)}),localStorage.setItem(l,JSON.stringify(o))},N=()=>{const e=a();localStorage.setItem(l,JSON.stringify([...e,h]))},x=e=>{e.key==="Enter"&&e.target.blur()};function _(e,r,c){return function(o){e=e??"p";const t=o.target.parentNode,n=document.createElement(e);n.innerText=o.target.value??"",n.className=r,E(c,o.target.value??"",e==="p"?"text":"title");const s=u(e,r,c);n.onclick=s,t.innerHTML=title,t.appendChild(n)}}function u(e,r,c){return function(o){const t=o.target.innerText,n=o.target.parentNode,s=document.createElement("input");s.type="text",s.value=t,s.className=`${r} task-list__input`,s.onblur=_(e,r,c),s.onkeydown=x,n.innerHTML="",n.appendChild(s),s.focus()}}const k=(e,r,c)=>{const o=document.createElement("li"),t=document.createElement("span"),n=document.createElement("h4"),s=document.createElement("p"),p=document.createElement("div"),d=document.createElement("div");return o.className="task-list__item",n.className="task-list__item-title",s.className="task-list__item-text",t.className="task-list__item-tick",d.style.display="flex",n.onclick=u(n.tagName,n.className,c??i),s.onclick=u(s.tagName,s.className,c??i),t.onclick=()=>{o.classList.toggle("checked");const m=a();m.forEach(f=>{f.id===c&&(f.checked=o.classList.contains("checked"))}),localStorage.setItem(l,JSON.stringify(m))},n.innerText=e,s.innerText=r,p.appendChild(n),d.appendChild(s),o.appendChild(t),o.appendChild(p),o.appendChild(d),setTimeout(()=>{o.scrollIntoView()},0),c===i&&(N(),++i),o},S=document.querySelector(".card-top__button");S.addEventListener("click",()=>{h.id=i;const e=k("Text header","Text body",i);g.prepend(e)});document.addEventListener("DOMContentLoaded",()=>{T()});
